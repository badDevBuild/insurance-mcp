# é»„é‡‘æµ‹è¯•é›† (Golden Test Set)

## ğŸ“‹ æ¦‚è¿°

æœ¬æµ‹è¯•é›†ç”¨äºéªŒè¯ç¬¬äº”é˜¶æ®µï¼ˆå‘é‡åŒ–ç´¢å¼•ï¼‰çš„æ£€ç´¢å‡†ç¡®æ€§ï¼Œæ ¹æ® `spec.md` Â§SC-003 çš„è¦æ±‚æ„å»ºã€‚

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
tests/golden_dataset/
â”œâ”€â”€ phase5_test_set_v1.json    # æµ‹è¯•é›†æ•°æ®ï¼ˆå½“å‰5ä¸ªç¤ºä¾‹ï¼Œç›®æ ‡50ä¸ªï¼‰
â”œâ”€â”€ loader.py                   # æµ‹è¯•é›†åŠ è½½å·¥å…·
â””â”€â”€ README.md                   # æœ¬æ–‡ä»¶
```

## ğŸ“Š æ•°æ®åˆ†å¸ƒè¦æ±‚

æ ¹æ® `spec.md` Â§SC-003ï¼Œå®Œæ•´æµ‹è¯•é›†å¿…é¡»æ»¡è¶³ï¼š

| å±‚çº§ | é—®é¢˜æ•° | æè¿° | éªŒæ”¶æ ‡å‡† |
|-----|-------|------|---------|
| **Tier 1 (åŸºç¡€)** | 20 | å•ä¸€æ¡æ¬¾æŸ¥è¯¢ | Top-1å‡†ç¡®ç‡ â‰¥ 90% |
| **Tier 2 (å¯¹æ¯”)** | 15 | å¤šæ¡æ¬¾å¯¹æ¯”æŸ¥è¯¢ | Top-3åŒ…å«æ‰€æœ‰ç›¸å…³æ¡æ¬¾ â‰¥ 85% |
| **Tier 3 (ä¸“é¡¹)** | 15 | å…è´£æ¡æ¬¾ä¸“é¡¹ | å¬å›ç‡ â‰¥ 95%ï¼Œç²¾ç¡®ç‡ â‰¥ 90% |

**æ€»è®¡**: 50ä¸ªæµ‹è¯•ç”¨ä¾‹

## ğŸ¯ å½“å‰ç‰ˆæœ¬çŠ¶æ€

- **ç‰ˆæœ¬**: v1.0.0
- **ç”¨ä¾‹æ•°**: 5ä¸ªï¼ˆç¤ºä¾‹ï¼‰
- **å±‚çº§åˆ†å¸ƒ**: Tier 1 (3), Tier 2 (1), Tier 3 (1)
- **çŠ¶æ€**: ğŸŸ¡ å¾…æ‰©å±•åˆ°50ä¸ªç”¨ä¾‹

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åŠ è½½æµ‹è¯•é›†

```python
from tests.golden_dataset.loader import load_test_set

# åŠ è½½å®Œæ•´æµ‹è¯•é›†
test_set = load_test_set()

print(f"æµ‹è¯•é›†: {test_set.name} v{test_set.version}")
print(f"æ€»ç”¨ä¾‹æ•°: {test_set.total_count}")
```

### 2. æŒ‰å±‚çº§ç­›é€‰

```python
from tests.golden_dataset.loader import get_test_cases_by_tier

# è·å–Tier 1ï¼ˆåŸºç¡€ï¼‰æµ‹è¯•ç”¨ä¾‹
tier1_cases = get_test_cases_by_tier(1)

for case in tier1_cases:
    print(f"é—®é¢˜: {case.question}")
    print(f"æœŸæœ›æ¡æ¬¾: {case.expected_section_ids}")
```

### 3. æŒ‰æŸ¥è¯¢ç±»å‹ç­›é€‰

```python
from tests.golden_dataset.loader import get_test_cases_by_type

# è·å–å…è´£ä¸“é¡¹æŸ¥è¯¢
exclusion_cases = get_test_cases_by_type("exclusion")
```

### 4. æŒ‰æ¡æ¬¾ç±»åˆ«ç­›é€‰

```python
from tests.golden_dataset.loader import get_test_cases_by_category

# è·å–å…è´£æ¡æ¬¾ç±»æµ‹è¯•
exclusion_category_cases = get_test_cases_by_category("Exclusion")
```

## ğŸ“ æµ‹è¯•ç”¨ä¾‹ç»“æ„

æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "id": "test_001_basic",
  "question": "è¿™ä¸ªä¿é™©ä¿å¤šä¹…ï¼Ÿ",
  "query_type": "basic",
  "expected_section_ids": ["1.4"],
  "expected_category": "Process",
  "company": "å¹³å®‰äººå¯¿",
  "tier": 1,
  "top_k": 5,
  "success_criteria": "Top-1ç»“æœçš„section_idåŒ…å«'ä¿é™©æœŸé—´'ç›¸å…³æ¡æ¬¾",
  "notes": "åŸºç¡€æŸ¥è¯¢ - ä¿é™©æœŸé—´"
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|-----|------|------|------|
| `id` | string | âœ… | æµ‹è¯•ç”¨ä¾‹å”¯ä¸€æ ‡è¯† |
| `question` | string | âœ… | è‡ªç„¶è¯­è¨€æŸ¥è¯¢é—®é¢˜ |
| `query_type` | enum | âœ… | æŸ¥è¯¢ç±»å‹ï¼ˆbasic/comparison/exclusionï¼‰ |
| `expected_section_ids` | array | âœ… | æœŸæœ›è¿”å›çš„æ¡æ¬¾ç¼–å·åˆ—è¡¨ |
| `expected_category` | enum | â¹ï¸ | æœŸæœ›çš„æ¡æ¬¾ç±»åˆ«ï¼ˆå¯é€‰ï¼‰ |
| `company` | string | âœ… | ä¿é™©å…¬å¸åç§° |
| `tier` | int | âœ… | æµ‹è¯•å±‚çº§ï¼ˆ1/2/3ï¼‰ |
| `top_k` | int | âœ… | è¿”å›ç»“æœæ•°é‡ |
| `success_criteria` | string | âœ… | æˆåŠŸæ ‡å‡†æè¿° |
| `notes` | string | â¹ï¸ | å¤‡æ³¨è¯´æ˜ |

## âœ… éªŒè¯æµ‹è¯•é›†

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯æµ‹è¯•é›†ï¼š

```bash
cd /Users/shushu/insurance-mcp
python tests/golden_dataset/loader.py
```

**é¢„æœŸè¾“å‡º**:
```
âœ… åŠ è½½æµ‹è¯•é›†æˆåŠŸ: Phase5_Golden_Test_Set v1.0.0
   æè¿°: ç¬¬äº”é˜¶æ®µå‘é‡æ£€ç´¢é»„é‡‘æµ‹è¯•é›† - åˆå§‹ç‰ˆæœ¬ï¼ˆ5ä¸ªç¤ºä¾‹ç”¨ä¾‹ï¼‰
   æ€»æµ‹è¯•ç”¨ä¾‹: 5
   å±‚çº§åˆ†å¸ƒ: {'1': 3, '2': 1, '3': 1}
   ç±»åˆ«åˆ†å¸ƒ: {'Process': 2, 'Liability': 1, 'Exclusion': 1, 'Definition': 1}

   Tier 1 ç”¨ä¾‹æ•°: 3
     ç¤ºä¾‹é—®é¢˜: è¿™ä¸ªä¿é™©ä¿å¤šä¹…ï¼Ÿ
   Tier 2 ç”¨ä¾‹æ•°: 1
     ç¤ºä¾‹é—®é¢˜: é€€ä¿å’Œå‡é¢äº¤æ¸…çš„åŒºåˆ«ï¼Ÿ
   Tier 3 ç”¨ä¾‹æ•°: 1
     ç¤ºä¾‹é—®é¢˜: é…’é©¾å‡ºäº‹èµ”å—ï¼Ÿ

âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

## ğŸ“¦ æ‰©å±•æµ‹è¯•é›†

### æ·»åŠ æ–°æµ‹è¯•ç”¨ä¾‹

1. ç¼–è¾‘ `phase5_test_set_v1.json`
2. åœ¨ `test_cases` æ•°ç»„ä¸­æ·»åŠ æ–°å¯¹è±¡
3. æ›´æ–° `total_count` å’Œ `tier_distribution`
4. è¿è¡Œ `python tests/golden_dataset/loader.py` éªŒè¯

### æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿

```json
{
  "id": "test_XXX_<type>",
  "question": "æ‚¨çš„é—®é¢˜ï¼Ÿ",
  "query_type": "basic|comparison|exclusion",
  "expected_section_ids": ["X.X.X"],
  "expected_category": "Liability|Exclusion|Process|Definition",
  "company": "å¹³å®‰äººå¯¿",
  "tier": 1|2|3,
  "top_k": 5,
  "success_criteria": "å…·ä½“çš„æˆåŠŸæ ‡å‡†",
  "notes": "å¯é€‰çš„å¤‡æ³¨è¯´æ˜"
}
```

### æ‰©å±•å»ºè®®

ä¸ºè¾¾åˆ°50ä¸ªç”¨ä¾‹çš„ç›®æ ‡ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹åˆ†å¸ƒæ·»åŠ ï¼š

- **Tier 1 åŸºç¡€æŸ¥è¯¢**ï¼ˆè¡¥å……17ä¸ªï¼‰:
  - ä¿é™©é‡‘é¢æŸ¥è¯¢
  - ä¿é™©æœŸé—´æŸ¥è¯¢
  - å—ç›Šäººç›¸å…³æŸ¥è¯¢
  - çŠ¹è±«æœŸæŸ¥è¯¢
  - ç”Ÿæ•ˆæ—¥æœŸæŸ¥è¯¢
  - ç­‰å¾…æœŸæŸ¥è¯¢
  - ...

- **Tier 2 å¯¹æ¯”æŸ¥è¯¢**ï¼ˆè¡¥å……14ä¸ªï¼‰:
  - é€€ä¿ vs å‡é¢äº¤æ¸…
  - èº«æ•…ä¿é™©é‡‘ vs æ»¡æœŸä¿é™©é‡‘
  - çŠ¹è±«æœŸ vs ç­‰å¾…æœŸ
  - ä¸åŒäº§å“çš„å¯¹æ¯”
  - ...

- **Tier 3 ä¸“é¡¹æŸ¥è¯¢**ï¼ˆè¡¥å……14ä¸ªï¼‰:
  - å„ç±»å…è´£æ¡æ¬¾ï¼ˆé…’é©¾ã€å¸æ¯’ã€è‡ªæ€ç­‰ï¼‰
  - ç‰¹æ®Šåœºæ™¯çš„å…è´£æ ¸æŸ¥
  - è¾¹ç•Œæƒ…å†µçš„å…è´£åˆ¤å®š
  - ...

## ğŸ“Š æµ‹è¯•é›†è´¨é‡æ ‡å‡†

### è¦†ç›–ç‡è¦æ±‚

- âœ… è‡³å°‘è¦†ç›–3ä¸ªä¸åŒäº§å“
- âœ… 4ç§categoryï¼ˆLiability/Exclusion/Process/Definitionï¼‰å„â‰¥10ä¸ª
- âœ… åŒ…å«è¾¹ç•Œæµ‹è¯•ç”¨ä¾‹ï¼ˆç›¸ä¼¼åº¦0.69, 0.7, 0.71ï¼‰
- âœ… åŒ…å«å¤šè½®å¯¹è¯åœºæ™¯

### è´¨é‡æ£€æŸ¥

- [ ] æ‰€æœ‰é—®é¢˜éƒ½æ˜¯çœŸå®ç”¨æˆ·å¯èƒ½æå‡ºçš„
- [ ] Ground Truthï¼ˆexpected_section_idsï¼‰ç»è¿‡äººå·¥æ ‡æ³¨å’ŒéªŒè¯
- [ ] success_criteria æ¸…æ™°ä¸”å¯è‡ªåŠ¨åŒ–éªŒè¯
- [ ] é¿å…é‡å¤æˆ–è¿‡äºç›¸ä¼¼çš„é—®é¢˜

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **éœ€æ±‚è§„æ ¼**: `specs/001-insurance-mcp-core/spec.md` Â§SC-003
- **ä»»åŠ¡å®šä¹‰**: `specs/001-insurance-mcp-core/tasks.md` T028a
- **æ•°æ®æ¨¡å‹**: `src/common/models.py` (GoldenTestCase, GoldenTestSet)
- **è¡¥æ•‘è®¡åˆ’**: `PHASE5_REMEDIATION_PLAN.md` Â§C2

## ğŸ“… ç‰ˆæœ¬å†å²

- **v1.0.0** (2025-11-21): åˆå§‹ç‰ˆæœ¬ï¼Œ5ä¸ªç¤ºä¾‹ç”¨ä¾‹
- **v1.1.0** (å¾…å®š): æ‰©å±•è‡³50ä¸ªç”¨ä¾‹ï¼ˆè®¡åˆ’ï¼‰

---

**ç»´æŠ¤è€…**: Insurance MCP Team  
**æœ€åæ›´æ–°**: 2025-11-21

