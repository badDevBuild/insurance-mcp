# Phase 1 é¡¹ç›®å¯åŠ¨æ–‡æ¡£

**é¡¹ç›®åç§°**: é«˜ä¿çœŸç»“æ„åŒ–è§£æé‡æ„  
**çŠ¶æ€**: ğŸŸ¢ å·²æ‰¹å‡†ï¼Œå¾…æ‰§è¡Œ  
**åˆ›å»ºæ—¥æœŸ**: 2025-11-24  
**é¢„è®¡å¼€å§‹**: 2025-11-25  
**é¢„è®¡å®Œæˆ**: 2025-12-13

---

## ğŸ“‹ æ‰§è¡Œè®¡åˆ’æ¦‚è§ˆ

### Plan ID
`4ba969fd-cc33-428d-bb9a-e49b8c42c3da`

### æŸ¥çœ‹è®¡åˆ’
```bash
# é€šè¿‡WarpæŸ¥çœ‹å®Œæ•´è®¡åˆ’
warp plans show 4ba969fd-cc33-428d-bb9a-e49b8c42c3da
```

---

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

å°†å½“å‰çš„"æ–‡æœ¬æµæå–"æ¶æ„å‡çº§ä¸º"æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDOMï¼‰æå–"ï¼Œè§£å†³ä¸‰å¤§æ ¸å¿ƒé—®é¢˜ï¼š

1. **è§£æè´¨é‡é—®é¢˜** ğŸ”´
   - ç°çŠ¶: å¤šæ æ’ç‰ˆé˜…è¯»é¡ºåºé”™ä¹±ï¼Œè¡¨æ ¼ç»“æ„ä¸¢å¤±
   - ç›®æ ‡: é˜…è¯»é¡ºåºå‡†ç¡®ç‡ â‰¥98%ï¼Œè¡¨æ ¼è¿˜åŸå‡†ç¡®ç‡ â‰¥95%

2. **è´¹ç‡è¡¨å¤„ç†å¤±è´¥** ğŸ”´
   - ç°çŠ¶: æ•°å­—å¯†é›†å‹æ•°æ®è¢«å‘é‡åŒ–ï¼Œæ— æ³•ç²¾ç¡®å›ç­”æ•°å€¼æŸ¥è¯¢
   - ç›®æ ‡: è´¹ç‡æŸ¥è¯¢å‡†ç¡®ç‡ 100%ï¼ˆé›¶å¹»è§‰ï¼‰

3. **ä¸Šä¸‹æ–‡ç¼ºå¤±** ğŸŸ 
   - ç°çŠ¶: Chunkä¸åŒ…å«çˆ¶çº§ç« èŠ‚ä¿¡æ¯
   - ç›®æ ‡: æ¯ä¸ªChunkè‡ªåŠ¨é™„å¸¦å®Œæ•´ç« èŠ‚è·¯å¾„

---

## ğŸ› ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” |
|------|---------|---------|------|
| **è§£æå¼•æ“** | Docling | â‰¥2.0.0 | PDFâ†’ç»“æ„åŒ–Markdown |
| **è¡¨æ ¼è¯†åˆ«** | Docling TSR | å†…ç½® | è¡¨æ ¼ç»“æ„è¿˜åŸ |
| **è¡¨æ ¼åºåˆ—åŒ–** | CSV + JSON | - | è´¹ç‡è¡¨ç‹¬ç«‹å­˜å‚¨ |
| **åˆ‡ç‰‡ç­–ç•¥** | Markdown-Aware | è‡ªç ” | ä¿ç•™å±‚çº§ç»“æ„ |

### æ•°æ®æµæ¶æ„

```
PDFæ–‡ä»¶
  â†“
[Docling Parser] â†’ è§£æä¸ºDoclingDocumentå¯¹è±¡
  â†“
[Document Analyzer] â†’ è¯†åˆ«è¡¨æ ¼ç±»å‹(è´¹ç‡è¡¨ vs æ™®é€šè¡¨)
  â†“
  â”œâ”€â†’ [è´¹ç‡è¡¨] â†’ CSV/JSON â†’ assets/tables/ + å…ƒæ•°æ®ç´¢å¼•
  â””â”€â†’ [æ–‡æœ¬+æ™®é€šè¡¨] â†’ Markdownåˆ‡ç‰‡ â†’ å‘é‡åŒ– â†’ ChromaDB
```

---

## ğŸ“¦ äº¤ä»˜ç‰©æ¸…å•

### ä»£ç äº¤ä»˜ç‰©

- [ ] `src/indexing/parsers/docling_parser.py` - Doclingè§£æå™¨
- [ ] `src/indexing/parsers/base.py` - æŠ½è±¡æ¥å£
- [ ] `src/indexing/parsers/legacy_parser.py` - æ—§è§£æå™¨å¤‡ç”¨
- [ ] `src/indexing/analyzers/table_classifier.py` - è¡¨æ ¼åˆ†ç±»å™¨
- [ ] `src/indexing/chunkers/markdown_chunker.py` - å±‚çº§åˆ‡ç‰‡å™¨
- [ ] `src/indexing/indexer.py` - æ›´æ–°ç´¢å¼•æµç¨‹
- [ ] `src/cli/manage.py` - æ–°å¢CLIå‘½ä»¤

### æ•°æ®äº¤ä»˜ç‰©

- [ ] `assets/tables/rate_tables/` - è´¹ç‡è¡¨å­˜å‚¨ç›®å½•
- [ ] `assets/tables/metadata.json` - è¡¨æ ¼ç´¢å¼•æ–‡ä»¶

### æµ‹è¯•äº¤ä»˜ç‰©

- [ ] `tests/unit/test_docling_parser.py` - è§£æå™¨å•å…ƒæµ‹è¯•
- [ ] `tests/unit/test_table_classifier.py` - åˆ†ç±»å™¨å•å…ƒæµ‹è¯•
- [ ] `tests/unit/test_markdown_chunker.py` - åˆ‡ç‰‡å™¨å•å…ƒæµ‹è¯•
- [ ] `tests/integration/test_docling_indexing.py` - é›†æˆæµ‹è¯•
- [ ] å›å½’æµ‹è¯•é€šè¿‡æŠ¥å‘Š

### æ–‡æ¡£äº¤ä»˜ç‰©

- [ ] `DOCLING_INTEGRATION.md` - é›†æˆæŠ€æœ¯æ–‡æ¡£
- [ ] æ›´æ–° `METADATA_STRUCTURE.md` - æ–°å­—æ®µè¯´æ˜
- [ ] æ›´æ–° `README.md` - å®‰è£…æŒ‡å—
- [ ] æ€§èƒ½åŸºå‡†æŠ¥å‘Š
- [ ] è¿ç§»æŒ‡å—

---

## ğŸ“… æ—¶é—´è¡¨

| é˜¶æ®µ | æ—¶é•¿ | å¼€å§‹æ—¥æœŸ | ç»“æŸæ—¥æœŸ | ä¾èµ– |
|------|------|---------|---------|------|
| Stage 1: ç¯å¢ƒå‡†å¤‡ | 1å¤© | 2025-11-25 | 2025-11-25 | æ—  |
| Stage 2: è§£æå™¨é›†æˆ | 2-3å¤© | 2025-11-26 | 2025-11-28 | Stage 1 |
| Stage 3: è¡¨æ ¼åˆ†ç¦» | 2å¤© | 2025-11-29 | 2025-12-02 | Stage 2 |
| Stage 4: åˆ‡ç‰‡å™¨ | 2å¤© | 2025-12-03 | 2025-12-04 | Stage 2 |
| Stage 5: æµç¨‹é‡æ„ | 1-2å¤© | 2025-12-05 | 2025-12-06 | Stage 3, 4 |
| Stage 6: æµ‹è¯• | 2å¤© | 2025-12-09 | 2025-12-10 | Stage 5 |
| Stage 7: æ–‡æ¡£ | 1å¤© | 2025-12-11 | 2025-12-11 | Stage 6 |
| **ç¼“å†²æ—¶é—´** | 2å¤© | 2025-12-12 | 2025-12-13 | - |

**å…³é”®è·¯å¾„**: Stage 1 â†’ Stage 2 â†’ Stage 3 â†’ Stage 5 â†’ Stage 6

---

## âœ… éªŒæ”¶æ ‡å‡†

### P0 (Must Have) - å¿…é¡»è¾¾æˆ

1. âœ… DoclingæˆåŠŸè§£ææµ‹è¯•PDF
2. âœ… è´¹ç‡è¡¨æ­£ç¡®åˆ†ç¦»å¹¶å¯¼å‡ºä¸ºCSV
3. âœ… Markdownåˆ‡ç‰‡åŒ…å«å®Œæ•´ç« èŠ‚è·¯å¾„
4. âœ… æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡

### P1 (Should Have) - åº”è¯¥è¾¾æˆ

5. âœ… å¤šæ PDFé˜…è¯»é¡ºåºå‡†ç¡®ç‡ â‰¥98%
6. âœ… è´¹ç‡è¡¨è¯†åˆ«å‡†ç¡®ç‡ â‰¥95%
7. âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥80%

### P2 (Nice to Have) - å¯é€‰è¾¾æˆ

8. âšª æ€§èƒ½ä¼˜äºæ—§è§£æå™¨
9. âšª æ”¯æŒGPUåŠ é€Ÿ
10. âšª å®Œæ•´çš„è°ƒè¯•æ—¥å¿—

---

## ğŸš¨ é£é™©ç®¡ç†

### å·²è¯†åˆ«é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ | è´Ÿè´£äºº |
|------|------|------|---------|--------|
| Doclingæ¨¡å‹ä¸‹è½½å¤±è´¥ | ä¸­ | é«˜ | æå‰ä¸‹è½½åˆ°æœ¬åœ°ï¼Œé…ç½®ç¦»çº¿è·¯å¾„ | å¼€å‘è€… |
| è´¹ç‡è¡¨è¯†åˆ«å‡†ç¡®ç‡ä¸è¶³ | ä¸­ | é«˜ | å®ç°äººå·¥æ ‡æ³¨æ¨¡å¼ï¼Œå…è®¸æ‰‹åŠ¨æ ‡è®° | å¼€å‘è€… |
| æ€§èƒ½ä¸‹é™ | ä½ | ä¸­ | æ‰¹å¤„ç†+ç¼“å­˜+GPUåŠ é€Ÿ | å¼€å‘è€… |
| ä¸ç°æœ‰ç³»ç»Ÿä¸å…¼å®¹ | ä½ | é«˜ | ä¿ç•™æ—§è§£æå™¨ä½œä¸ºfallback | å¼€å‘è€… |

### é£é™©åº”å¯¹è®¡åˆ’

**å¦‚æœDoclingæ— æ³•æ»¡è¶³éœ€æ±‚**:
1. è¯„ä¼°PaddleOCR (ä¸­æ–‡ä¼˜åŒ–æ–¹æ¡ˆ)
2. æˆ–ä¿ç•™ç°æœ‰è§£æå™¨ï¼Œä»…ä¼˜åŒ–åˆ‡ç‰‡ç­–ç•¥

---

## ğŸ“ æ²Ÿé€šè®¡åˆ’

### è¿›åº¦æŠ¥å‘Šé¢‘ç‡
- **æ¯æ—¥**: åœ¨é¡¹ç›®ç¾¤æ›´æ–°å½“å¤©å®Œæˆçš„Stage
- **æ¯å‘¨**: å‘¨äº”å‘é€å‘¨æŠ¥ï¼ŒåŒ…å«ï¼š
  - æœ¬å‘¨å®Œæˆçš„äº¤ä»˜ç‰©
  - ä¸‹å‘¨è®¡åˆ’
  - é‡åˆ°çš„é˜»ç¢

### é‡Œç¨‹ç¢‘æ£€æŸ¥ç‚¹

1. **Stage 2å®Œæˆ** (2025-11-28)
   - æ£€æŸ¥ç‚¹: DoclingæˆåŠŸè§£ææµ‹è¯•PDF
   - å†³ç­–ç‚¹: æ˜¯å¦ç»§ç»­ä½¿ç”¨Docling

2. **Stage 5å®Œæˆ** (2025-12-06)
   - æ£€æŸ¥ç‚¹: é›†æˆæµ‹è¯•é€šè¿‡ç‡
   - å†³ç­–ç‚¹: æ˜¯å¦éœ€è¦å»¶é•¿æµ‹è¯•æ—¶é—´

---

## ğŸ“ å­¦ä¹ èµ„æº

å›¢é˜Ÿæˆå‘˜åº”åœ¨Stage 1æœŸé—´é˜…è¯»ä»¥ä¸‹èµ„æ–™ï¼š

1. **Doclingå®˜æ–¹æ–‡æ¡£**
   - GitHub: https://github.com/DS4SD/docling
   - å¿«é€Ÿå¼€å§‹: https://github.com/DS4SD/docling#quick-start

2. **æ·±åº¦ç ”ç©¶æŠ¥å‘Š**
   - ä½ç½®: é¡¹ç›®æ ¹ç›®å½• (ç”¨æˆ·æä¾›)
   - é‡ç‚¹ç« èŠ‚: ç¬¬3ç« ï¼ˆè§£ææŠ€æœ¯ï¼‰ã€ç¬¬5ç« ï¼ˆRAGæ¶æ„ï¼‰

3. **ç°æœ‰ä»£ç åº“**
   - `src/indexing/indexer.py` - å½“å‰ç´¢å¼•æµç¨‹
   - `src/common/models.py` - PolicyChunkæ¨¡å‹
   - `METADATA_STRUCTURE.md` - å…ƒæ•°æ®è®¾è®¡

---

## ğŸ å¯åŠ¨æ¸…å•

### å‡†å¤‡å·¥ä½œ (Stage 1 ç¬¬ä¸€å¤©)

- [ ] å¬å¼€å¯åŠ¨ä¼šè®®ï¼Œå…¨å‘˜å¯¹é½ç›®æ ‡
- [ ] é…ç½®å¼€å‘ç¯å¢ƒ
  - [ ] å®‰è£…Docling: `pip install docling>=2.0.0`
  - [ ] éªŒè¯CUDAæ”¯æŒï¼ˆå¦‚æœ‰GPUï¼‰
  - [ ] æµ‹è¯•Doclingè§£æç¤ºä¾‹PDF
- [ ] åˆ›å»ºé¡¹ç›®åˆ†æ”¯: `git checkout -b phase1-docling-integration`
- [ ] åˆ›å»ºç›®å½•ç»“æ„:
  ```bash
  mkdir -p src/indexing/parsers
  mkdir -p src/indexing/analyzers
  mkdir -p src/indexing/chunkers
  mkdir -p assets/tables/rate_tables
  ```
- [ ] æ›´æ–°é…ç½®æ–‡ä»¶ `src/common/config.py`
- [ ] å‡†å¤‡æµ‹è¯•æ•°æ®é›† (2-3ä¸ªå¤šæ PDFæ ·æœ¬)

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

é¡¹ç›®æˆåŠŸçš„å®šä¹‰ï¼š

1. **å®šé‡æŒ‡æ ‡**
   - è¡¨æ ¼è¿˜åŸå‡†ç¡®ç‡ â‰¥95% âœ…
   - é˜…è¯»é¡ºåºå‡†ç¡®ç‡ â‰¥98% âœ…
   - è´¹ç‡æŸ¥è¯¢å‡†ç¡®ç‡ 100% âœ…
   - å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥80% âœ…

2. **å®šæ€§æŒ‡æ ‡**
   - LLMèƒ½æ­£ç¡®ç†è§£Markdownè¡¨æ ¼ âœ…
   - æ¯ä¸ªChunkè‡ªåŠ¨é™„å¸¦ç« èŠ‚è·¯å¾„ âœ…
   - è´¹ç‡è¡¨ä¸æ–‡æœ¬Chunkå®Œå…¨éš”ç¦» âœ…

3. **æ—¶é—´æŒ‡æ ‡**
   - æŒ‰æ—¶äº¤ä»˜ï¼ˆÂ±2å¤©ç¼“å†²ï¼‰ âœ…

---

## ğŸ”„ åç»­é˜¶æ®µé¢„å‘Š

Phase 1å®Œæˆåï¼Œå°†è¿›å…¥Phase 2:

**Phase 2: é¢†åŸŸçŸ¥è¯†å¢å¼º**
- æ··åˆæ£€ç´¢ (Dense + Sparse)
- Text-to-SQLè´¹ç‡æŸ¥è¯¢å·¥å…·
- BGE-M3æ¨¡å‹å‡çº§

**é¢„è®¡å¯åŠ¨æ—¶é—´**: 2025-12-16

---

## ğŸ“ å˜æ›´è®°å½•

| æ—¥æœŸ | å˜æ›´å†…å®¹ | æ‰¹å‡†äºº |
|------|---------|--------|
| 2025-11-24 | åˆå§‹ç‰ˆæœ¬ï¼Œé¡¹ç›®å¯åŠ¨ | ç”¨æˆ· |

---

**é¡¹ç›®è´Ÿè´£äºº**: AI Assistant  
**å®¡æ‰¹çŠ¶æ€**: âœ… å·²æ‰¹å‡†  
**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**: å¼€å§‹æ‰§è¡ŒStage 1ç¯å¢ƒå‡†å¤‡
